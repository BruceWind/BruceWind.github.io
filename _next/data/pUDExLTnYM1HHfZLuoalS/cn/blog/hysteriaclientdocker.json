{"pageProps":{"post":{"slug":"hysteriaclientdocker","title":"HysteriaClientDocker","mdsource":"https://raw.githubusercontent.com/BruceWind/HysteriaClientDocker/refs/heads/main/README_zh.md","date":"2021-09-10","category":"开源"},"content":"## Hysteria 客户端 Docker\n\n多数传统代理协议在某些场景下可以提升访问速度，但往往**无法真正让网络变得顺畅、稳定**。  \n**Hysteria** 与这些协议不同：它专门为在网络质量较差或不稳定的环境下提供更流畅、更低延迟的体验而设计，可以显著改善日常浏览和观影体验。  \n然而，目前**能够方便支持 Hysteria 的客户端并不多**。本项目通过 Docker 提供了一个易于部署的 Hysteria 客户端，让你更轻松地享受 Hysteria 带来的网络体验提升。\n\n本仓库提供了一个用于运行 Hysteria 客户端的 Docker 环境。Hysteria 是一个为安全、高性能通信而设计的项目。\n\n## 快速开始\n\n按照以下步骤即可快速在 Docker 中运行 Hysteria 客户端：\n\n1. **添加你的 URL：**  \n   在 `config/urls.txt` 中添加一个或多个 Hysteria URL。容器启动时会解析每一行合法的 URL，并自动生成对应的配置文件。\n\n2. **使用 Docker 构建并运行：**\n\n   在终端中执行：\n\n   ```bash\n   docker compose build && docker compose up -d\n   ```\n\n   该命令会构建所需的 Docker 镜像，并以后台方式启动 Hysteria 客户端服务。\n\n容器启动后将执行以下操作：\n\n- 解析 `config/urls.txt` 中的每个 URL 并生成对应的 YAML 配置文件；\n- 在辅助 SOCKS 端口上测试每个配置（这样公共端口 `1080/1089` 保持空闲），并自动选择最快且可用的配置；\n- 启动 `boot_with_periordic_tester.py`，在 `0.0.0.0:1080`（SOCKS5）和 `0.0.0.0:1089`（HTTP）上保持当前选中的配置持续运行，同时每 3 分钟在后台端口上重新测试连接质量，当发现更优链路时自动切换。\n\n### 关于周期性测试的说明\n\n- **只有一个 URL / 一个配置的情况**：  \n  如果 `config/urls.txt` 最终只生成一个可用配置，程序会直接使用该配置建立连接，**不会进入周期性“寻找最优配置”的流程**。\n\n- **当前代理变差时可能出现短暂停机（约 10 秒）**：  \n  当检测到当前代理的延迟明显变差时，周期性测试可能会触发一次完整重测：先停止当前主 Hysteria 进程，再在辅助端口上启动测试实例以寻找更优配置。在这种情况下，主代理端口（`1080/1089`）可能会有大约 **10 秒左右** 无法正常转发流量。\n\n## 暴露端口\n\n容器对外暴露以下端口：\n\n- **SOCKS 端口**：`1080`\n- **HTTP 端口**：`1089`\n\n## 环境变量\n\n- `HYSTERIA_TEST_INTERVAL`（单位：秒，默认值 `180`）：周期性测试脚本在后台重新进行连通性检测的时间间隔。在此期间，客户端会持续使用主代理端口。\n- `HYSTERIA_TEST_URLS`（逗号分隔）：覆盖默认的探测 URL 列表  \n  （默认值：`https://cp.cloudflare.com/generate_204`、`https://www.bing.com`、`https://www.google.com/generate_204`）。  \n  如果你所在地区对某些站点有限制，可以自定义此列表。\n\n## 使用方式\n\n服务启动并运行后，只需将你的设备代理指向：\n\n- `localhost:1080`（SOCKS5）\n- `localhost:1089`（HTTP）\n\n即可通过选定的 Hysteria 隧道访问网络。\n\n## 贡献\n\n欢迎通过提交 Issue、提出功能建议或发起 Pull Request 来为本项目做出贡献。\n\n## 致谢\n\n本项目使用了由 [apernet](https://github.com/apernet/hysteria) 开发的 Hysteria 客户端。  \n关于功能和使用的更多细节，请参考其官方文档。\n\n\n","lang":"cn"},"__N_SSG":true}