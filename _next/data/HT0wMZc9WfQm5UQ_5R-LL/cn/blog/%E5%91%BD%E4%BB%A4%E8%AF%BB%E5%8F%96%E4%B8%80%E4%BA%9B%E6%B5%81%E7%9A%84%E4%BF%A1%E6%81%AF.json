{"pageProps":{"post":{"slug":"%E5%91%BD%E4%BB%A4%E8%AF%BB%E5%8F%96%E4%B8%80%E4%BA%9B%E6%B5%81%E7%9A%84%E4%BF%A1%E6%81%AF","title":"命令读取一些流的信息.md","mdsource":"md/命令读取一些流的信息.md","date":" 2016/10/27 16:47:20","category":"几年后回看会觉得写的太烂"},"content":"title: 命令读取一些流的信息\ndate: 2016/10/27 16:47:20\nupdated: 2016/12/16 13:47:39\ncategories:\n- 技术\n---\n##  flash播放：\n\nhttp://www.cutv.com/demo/live_test.swf\n\n\n## 1.mediainfo\n```\nmediainfo rtmp://live.quanmin.tv/live/6625566\n```\n\n## 2.ffplay  \n\n```\n播放：\nffplay rtmp://live.quanmin.tv/live/6625566　　\n//然后会弹出　一个播放窗口　同时命令行会出现一个界面展示　流信息\n\n```\n## 3.mplayer\n\n```\n$ mplayer -identify -frames 0  rtmp://xx.xx.xx/live/2729488\n'MPlayer 1.2.1 (Debian), built with gcc-5.3.1 (C) 2000-2016 MPlayer Team\nmplayer: could not connect to socket\nmplayer: No such file or directory\nFailed to open LIRC support. You will not be able to use your remote control.\n\nPlaying rtmp://live.quanmin.tv/live/2729488.\nlibavformat version 56.40.101 (external)\nMetadata:\n  duration              0.00\n  videocodecid          7.00\n  audiocodecid          10.00\n  videoframerate        15.00\nlibavformat file format detected.\nID_VIDEO_ID=0\n[lavf] stream 0: video (h264), -vid 0\nID_AUDIO_ID=0\n[lavf] stream 1: audio (aac), -aid 0\nVIDEO:  [H264]  368x640  0bpp  1000.000 fps    0.0 kbps ( 0.0 kbyte/s)\nClip info:\n videoframerate: 15\nID_CLIP_INFO_NAME0=videoframerate\nID_CLIP_INFO_VALUE0=15\nID_CLIP_INFO_N=1\nID_FILENAME=rtmp://live.quanmin.tv/live/2729488\nID_DEMUXER=lavfpref\nID_VIDEO_FORMAT=H264\nID_VIDEO_BITRATE=0\nID_VIDEO_WIDTH=368\nID_VIDEO_HEIGHT=640\nID_VIDEO_FPS=1000.000\nID_VIDEO_ASPECT=0.0000\nID_AUDIO_FORMAT=MP4A\nID_AUDIO_BITRATE=0\nID_AUDIO_RATE=44100\nID_AUDIO_NCH=1\nID_START_TIME=0.00\nID_LENGTH=0.00\nID_SEEKABLE=0\nID_CHAPTERS=0\nFailed to open VDPAU backend libvdpau_va_gl.so: cannot open shared object file: No such file or directory\n[vdpau] Error when calling vdp_device_create_x11: 1\n==========================================================================\nOpening video decoder: [ffmpeg] FFmpeg libavcodec codec family\nlibavcodec version 56.60.100 (external)\nSelected video codec: [ffh264] vfm: ffmpeg (FFmpeg H.264)\n==========================================================================\nID_VIDEO_CODEC=ffh264\n==========================================================================\nOpening audio decoder: [ffmpeg] FFmpeg/libavcodec audio decoders\nAUDIO: 44100 Hz, 1 ch, floatle, 0.0 kbit/0.00% (ratio: 0->176400)\nID_AUDIO_BITRATE=0\nID_AUDIO_RATE=44100\nID_AUDIO_NCH=1\nSelected audio codec: [ffaac] afm: ffmpeg (FFmpeg AAC (MPEG-2/MPEG-4 Audio))\n==========================================================================\nAO: [pulse] 44100Hz 1ch floatle (4 bytes per sample)\nID_AUDIO_CODEC=ffaac\nStarting playback...\n\n\nExiting... (End of file)\nID_EXIT=EOF';\n\n\n```\n\n\n##  PS：其实如上方案都只是抓取流的　head信息，比如：FPS,一秒钟播放器真正解码多少帧，才表示真实的FPS．\n\n但是：如上确实可以帮你看出，主播推流的一些重要信息．\n# \n我从ijk的开源项目里弄了一个apk，用于查看真实的流的FPS信息。\n地址如下：[https://github.com/BruceWind/show_video_fps](https://github.com/BruceWind/show_video_fps)","lang":"cn"},"__N_SSG":true}