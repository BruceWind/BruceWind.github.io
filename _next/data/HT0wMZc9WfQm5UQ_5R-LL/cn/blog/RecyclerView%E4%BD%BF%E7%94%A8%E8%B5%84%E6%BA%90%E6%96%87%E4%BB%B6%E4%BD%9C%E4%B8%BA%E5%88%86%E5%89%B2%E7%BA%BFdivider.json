{"pageProps":{"post":{"slug":"RecyclerView%E4%BD%BF%E7%94%A8%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E4%BD%9C%E4%B8%BA%E5%88%86%E5%89%B2%E7%BA%BFdivider","title":"RecyclerView使用资源文件作为分割线divider.md","mdsource":"md/RecyclerView使用资源文件作为分割线divider.md","date":" 2016/02/24 23:42:02","category":"几年后回看会觉得写的太烂"},"content":"title: RecyclerView使用资源文件作为分割线divider\ndate: 2016/02/24 23:42:02\nupdated: 2016/02/25 00:33:22\ncategories:\n- 技术\n---\n在listview中有个很好的东西就是```android:divider```，但是recyclerview中取消了这个属性，但是像画个分割线都变得困难，必须要用Decoration类才行。我依旧想用自定义的drawable文件来作为分割线，所以我想到如下方案：\n\n### 有一种方案是 **统一设置分割线**\n你可以在theme.xml中找到该属性的使用情况。那么，使用系统的listDivider有什么好处呢？就是方便我们去随意的改变，该属性我们可以直接声明在：\n``` xml\n <!-- Application theme. -->\n    <style name=\"AppTheme\" parent=\"AppBaseTheme\">\n      <item name=\"android:listDivider\">@drawable/divider_bg</item>  \n    </style>\n```\n这种比较简单的方案，但是无法满足当前我的需求啊，我特么的就是想要每个控件都有不同的分割线，谁知道脑残的ui和产品想要怎么折腾，这样子统一设置肯定无法满足我的需求啊！！！！\n\n### 所以，我需要**单独设置分割线**：\n# \n看代码，我是这么使用的：\n``` java\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n\n        initData();\n        //最关键的三行代码\n        mRecyclerView = (RecyclerView) findViewById(R.id.id_recyclerview);\n        mRecyclerView.setLayoutManager(new LinearLayoutManager(this));\n        mRecyclerView.setAdapter(mAdapter = new HomeAdapter());\n\n        //设置分割线\n        mRecyclerView.addItemDecoration(new ResourceItemDivider(MyActivity.this,R.color.bl));\n\n    }\n```\n这里的```R.color.bl```我就用了一个color，但如果用自定义的drawable也是没有问题的。\n```ResourceItemDivider``` 类定义是这么定义的\n\n``` java\npublic class ResourceItemDivider extends RecyclerView.ItemDecoration {\n\n    private Drawable mDrawable;\n\n    /**\n     *作为Divider的Drawable对象\n     * @param context 当前上下文用于获取资源\n     * @param resId  color drawable等类型资源文件\n     */\n    public ResourceItemDivider(Context context, int resId) {\n        mDrawable = context.getResources().getDrawable(resId);\n    }\n\n\n    public void onDrawOver(Canvas c, RecyclerView parent) {\n        final int left = parent.getPaddingLeft();\n        final int right = parent.getWidth() - parent.getPaddingRight();\n\n        final int childCount = parent.getChildCount();\n        for (int i = 0; i < childCount; i++) {\n            final View child = parent.getChildAt(i);\n            final RecyclerView.LayoutParams params = (RecyclerView.LayoutParams) child\n                    .getLayoutParams();\n            //以下计算主要用来确定绘制的位置\n            final int top = child.getBottom() + params.bottomMargin;\n            final int bottom = top + mDrawable.getIntrinsicHeight();\n            mDrawable.setBounds(left, top, right, bottom);\n            mDrawable.draw(c);\n\n\n        }\n    }\n\n    public void getItemOffsets(Rect outRect, int position, RecyclerView parent) {\n        outRect.set(0, 0, 0, mDrawable.getIntrinsicWidth());\n    }\n\n```\n\n\n","lang":"cn"},"__N_SSG":true}