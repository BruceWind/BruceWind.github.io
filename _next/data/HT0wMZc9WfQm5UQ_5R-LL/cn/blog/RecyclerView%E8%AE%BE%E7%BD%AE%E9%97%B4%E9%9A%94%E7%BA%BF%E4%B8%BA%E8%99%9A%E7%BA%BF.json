{"pageProps":{"post":{"slug":"RecyclerView%E8%AE%BE%E7%BD%AE%E9%97%B4%E9%9A%94%E7%BA%BF%E4%B8%BA%E8%99%9A%E7%BA%BF","title":"RecyclerView设置间隔线为虚线.md","mdsource":"md/RecyclerView设置间隔线为虚线.md","date":" 2016/02/24 23:37:58","category":"几年后回看会觉得写的太烂"},"content":"title: RecyclerView设置间隔线为虚线\ndate: 2016/02/24 23:37:58\nupdated: 2016/02/25 00:46:44\ncategories:\n- 技术\n---\n以前使用listview的时候，使用了资源文件作为divider，绘制虚线也是用自定义的drawable绘制虚线，当然会遇到一些坑，虚线不会那么容易加载出来，android 4.0以后的系统都默认开启了硬件加速，虚线就绘制不出来了，所以解决方案很简单，关闭act的硬件加速或者listview 的硬件加速即可，所以，listview上用资源文件去绘制虚线还是很好用的。\n但是，recyclerview的话我也试着用资源文件去绘制虚线，看我这篇[《Recyclerview使用资源文件作为分割线divider》](http://androidyuan.com/post/Recyclerview%E4%BD%BF%E7%94%A8%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E4%BD%9C%E4%B8%BAdivider)，在Recyclerview中，就算我关闭了硬件加速，也是直线，蛋疼。。。\n\n所以，还是老老实实，用canvas自己绘制虚线吧！\n# \n看代码，我是这么使用的：\n``` java\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n\n        initData();\n        //最关键的三行代码\n        mRecyclerView = (RecyclerView) findViewById(R.id.id_recyclerview);\n        mRecyclerView.setLayoutManager(new LinearLayoutManager(this));\n        mRecyclerView.setAdapter(mAdapter = new HomeAdapter());\n\n        //设置分割线\n        mRecyclerView.addItemDecoration(new DashlineItemDivider());\n\n    }\n```\n\n\n上```DashlineItemDivider```代码:\n``` java\npublic class DashlineItemDivider extends RecyclerView.ItemDecoration {\n\n\n\n    public void onDrawOver(Canvas c, RecyclerView parent) {\n        final int left = parent.getPaddingLeft();\n        final int right = parent.getWidth() - parent.getPaddingRight();\n\n        final int childCount = parent.getChildCount();\n        for (int i = 0; i < childCount; i++) {\n            final View child = parent.getChildAt(i);\n            final RecyclerView.LayoutParams params = (RecyclerView.LayoutParams) child\n                    .getLayoutParams();\n            //以下计算主要用来确定绘制的位置\n            final int top = child.getBottom() + params.bottomMargin;\n\n            //绘制虚线\n            Paint paint = new Paint();\n            paint.setStyle(Paint.Style.STROKE);\n            paint.setColor(Color.RED);\n            Path path = new Path();\n            path.moveTo(left, top);\n            path.lineTo(right,top);\n            PathEffect effects = new DashPathEffect(new float[]{15,15,15,15},5);//此处单位是像素不是dp  注意 请自行转化为dp\n            paint.setPathEffect(effects);\n            c.drawPath(path, paint);\n\n\n        }\n    }\n    \n}\n\n\n```\n\n# \n效果如图：\n\n![](assets/20160225003700732.jpg)","lang":"cn"},"__N_SSG":true}