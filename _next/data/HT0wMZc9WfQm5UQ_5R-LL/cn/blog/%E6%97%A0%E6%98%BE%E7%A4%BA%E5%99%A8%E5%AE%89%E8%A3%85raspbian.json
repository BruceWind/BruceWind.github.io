{"pageProps":{"post":{"slug":"%E6%97%A0%E6%98%BE%E7%A4%BA%E5%99%A8%E5%AE%89%E8%A3%85raspbian","title":"无显示器安装raspbian.md","mdsource":"md/无显示器安装raspbian.md","date":" 2016/12/19 00:45:19","category":"几年后回看会觉得写的太烂"},"content":"title: 无显示器安装raspbian\ndate: 2016/12/19 00:45:19\nupdated: 2017/01/02 18:27:38\ncategories:\n- 技术\n---\n> 文章写了很久了，一致都没亮出来。\n\n下载 [raspbian jessie lite](https://www.raspberrypi.org/downloads/raspbian/) （无GUI版本），用一个老旧的2GB内存卡，烧录，空间都剩余800M左右。\n    \n    最喜欢无GUI版本，命令行舒服。\n## 1.烧录SD卡\n```\n$ cd 下载\n$ sudo dd if=2016-xx-xx-raspbian-jessie-lite.img of=/dev/sdb bs=4M\n//最新的目前是什么版本我已经搞不清楚了。\n```\n\n## 2.配置WIFI和连接密码 \n\n烧录完成之后，重新插拔SD卡。\n然后看到有个1.3G的盘子里，一堆的linux文件。\n#  \n**/etc/wpa_supplicant/wpa_supplicant.conf**这个文件才是配置wifi和密码的。\n\n```\nsudo gedit /etc/wpa_supplicant/wpa_supplicant.conf\n```\n在文件的最后一行之后追加：\n\n```\nnetwork={\n    ssid=\"testing\"\n    psk=\"testingPassword\"\n}\n```\n\n> 有些同学，咳咳，那什么，自己家的wifi名字起得太长了，怕拼错的，ubuntu或者mac下可以用iwconfig命令获取一下，然后**ctrl+shift+C**拷贝一下，再写入到这个文件中。\n\n## 3.启用ssh\na.在那个盘子下创建一个空白文件即可。\n\n```\nsudo vi etc/SSHFLAG\n```\n# \nb.修改一个文件/etc/rc.local 追加如下代码在第一行。\n```\nif [ -e /etc/SSHFLAG ]; then\n  /usr/sbin/update-rc.d -f ssh defaults\n  /bin/rm /etc/SSHFLAG\n  /sbin/shutdown -r now\nfi\n```\n从电脑上拔掉sd卡，插RPi上，开机。\n# \nc. 启动后，等待重启（也许两分钟），这之后你可以ping到RPi的IP，如果确定，关闭RPi，拔掉SD卡，再次编辑文件/etc/rc.local与电脑。\n插入如下代码，到第一行。\n```\nsudo vi /etc/init.d/ssh start\n```\n# \n\n## 4.使用nmap扫描 局域网中 是否存在树莓派设备\n\n```\n$ sudo nmap 192.168.199.1-255\n\nStarting Nmap 6.47 ( http://nmap.org ) at 2016-12-19 01:01 CST\nNmap scan report for Hiwifi.lan (192.168.199.1)\nHost is up (0.00088s latency).\nNot shown: 993 closed ports\nPORT     STATE SERVICE\n53/tcp   open  domain\n80/tcp   open  http\n81/tcp   open  hosts2-ns\n82/tcp   open  xfer\n83/tcp   open  mit-ml-dev\n443/tcp  open  https\n5000/tcp open  upnp\nMAC Address: D4:EE:07:13:C9:46 (Hiwifi Co.)\n\nNmap scan report for 192.168.199.117\nHost is up (0.0013s latency).\nNot shown: 999 closed ports\nPORT   STATE SERVICE\n22/tcp open  ssh\nMAC Address: B8:27:EB:46:73:43 (Raspberry Pi Foundation)\n\nNmap scan report for android-a3929929ec50096a.lan (192.168.199.207)\nHost is up (0.0022s latency).\nAll 1000 scanned ports on android-a3929929ec50096a.lan (192.168.199.207) are closed\nMAC Address: 80:41:4E:D5:EE:13 (BBK Electronics)\n\nNmap scan report for raspberrypi.lan (192.168.199.218)\nHost is up (0.0013s latency).\nNot shown: 999 closed ports\nPORT   STATE SERVICE\n22/tcp open  ssh\nMAC Address: B8:27:EB:13:26:16 (Raspberry Pi Foundation)\n\nNmap scan report for wei-MacBookAir.lan (192.168.199.124)\nHost is up (0.0000070s latency).\nNot shown: 999 closed ports\nPORT   STATE SERVICE\n22/tcp open  ssh\n\nNmap done: 255 IP addresses (5 hosts up) scanned in 193.37 seconds'\n\n\n```\n\n单独扫描117这个ip，查看是否开启了ssh的22端口。\n```\n\n$ sudo nmap -O 192.168.199.117\n\n'\n[sudo] wei 的密码： \n\nStarting Nmap 6.47 ( http://nmap.org ) at 2016-12-19 01:23 CST\nNmap scan report for raspberrypi.lan (192.168.199.117)\nHost is up (0.0050s latency).\nNot shown: 999 closed ports\nPORT   STATE SERVICE\n22/tcp open  ssh\nMAC Address: B8:27:EB:46:73:43 (Raspberry Pi Foundation)\nDevice type: general purpose\nRunning: Linux 3.X\nOS CPE: cpe:/o:linux:linux_kernel:3\nOS details: Linux 3.11 - 3.14\nNetwork Distance: 1 hop\n\nOS detection performed. Please report any incorrect results at http://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 21.84 seconds'\n\n\n```\n日志上显示已经开启了这个端口，接下来。我们ssh登录一下吧。\n\n```\n$ ssh pi@192.168.199.117\n'The authenticity of host 192.168.199.117 (192.168.199.117) cant be established.\nECDSA key fingerprint is SHA256:337sCVUu6oxJn7sCEy1VbNeijLqdajX/JSGkiCC7jL0.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '192.168.199.117' (ECDSA) to the list of known hosts.\npi@192.168.199.117''s password: \n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Fri Nov 25 18:01:05 2016\n\nSSH is enabled and the default password for the 'pi' user has not been changed.\nThis is a security risk - please login as the 'pi' user and type 'passwd' to set a new password.\n\n\npi@raspberrypi:~ $ cpuinfo\n-bash: cpuinfo: command not found\npi@raspberrypi:~ $ cpuinfo\n-bash: cpuinfo: command not found\npi@raspberrypi:~ $ lscpu\nArchitecture:          armv7l\nByte Order:            Little Endian\nCPU(s):                4\nOn-line CPU(s) list:   0-3\nThread(s) per core:    1\nCore(s) per socket:    4\nSocket(s):             1\nModel name:            ARMv7 Processor rev 4 (v7l)\nCPU max MHz:           1200.0000\nCPU min MHz:           600.0000\n'\n```\n--------------------------\n晒一张大图。\n\n![](assets/no_display_install_rpi.png)\n\n","lang":"cn"},"__N_SSG":true}