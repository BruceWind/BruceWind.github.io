{"pageProps":{"post":{"slug":"tmux-cheatsheet.markdown","title":"tmux-cheatsheet.markdown","mdsource":"https://gist.githubusercontent.com/BruceWind/a3eb039d4624331dfa592e6e0caf8f18/raw/305363e17090229ec8da1cde9c037a2147e7254c/tmux-cheatsheet.markdown","date":"2019-04-16T11:07:45Z","category":"Gists"},"content":"## 如果alias丢失\n紧急使用可以先执行 source ~/.bash_rc\n\n添加如下代码到~/.bash_profile之后下次启动tmux就有效了\n```\ncase $- in *i*) . ~/.bashrc;; esac\n```\n\n\n注意：本文内容适用于 Tmux 2.3 及以上的版本，但是绝大部分的特性低版本也都适用，鼠标支持、VI 模式、插件管理在低版本可能会与本文不兼容。\n\n# Tmux 快捷键 & 速查表\n\n启动新会话：\n\n    tmux [new -s 会话名 -n 窗口名]\n\n恢复会话：\n\n    tmux at [-t 会话名]\n\n列出所有会话：\n\n    tmux ls\n\n<a name=\"killSessions\"></a>关闭会话：\n\n    tmux kill-session -t 会话名\n\n<a name=\"killAllSessions\"></a>关闭所有会话：\n\n    tmux ls | grep : | cut -d. -f1 | awk '{print substr($1, 0, length($1)-1)}' | xargs kill\n\n# 在 Tmux 中，按下 Tmux 前缀 `ctrl+b`，然后：\n\n## 会话\n\n    :new<回车>  启动新会话\n    s           列出所有会话\n    $           重命名当前会话\n    \n\n## <a name=\"WindowsTabs\"></a>窗口 (标签页)\n\n    c  创建新窗口\n    w  列出所有窗口\n    n  后一个窗口\n    p  前一个窗口\n    f  查找窗口\n    ,  重命名当前窗口\n    &  关闭当前窗口\n\n## 调整窗口排序\n\n    swap-window -s 3 -t 1  交换 3 号和 1 号窗口\n    swap-window -t 1       交换当前和 1 号窗口\n    move-window -t 1       移动当前窗口到 1 号\n\n## <a name=\"PanesSplits\"></a>窗格（分割窗口） \n\n    %  垂直分割\n    \"  水平分割\n    o  交换窗格\n    x  关闭窗格\n    ⍽  左边这个符号代表空格键 - 切换布局\n    q 显示每个窗格是第几个，当数字出现的时候按数字几就选中第几个窗格\n    { 与上一个窗格交换位置\n    } 与下一个窗格交换位置\n    z 切换窗格最大化/最小化\n\n    \n ## 滚屏\n   1.C+b  之后\n   \n    PageUp      上翻一页\n    PageDown    下翻一页\n    \n   2.C+b `[` 之后\n   \n    方向键上      光标上移一行\n    方向键下      光标下移一行\n    PageUp      上翻一页\n    PageDown    下翻一页\n    \n## <a name=\"syncPanes\"></a>同步窗格\n\n这么做可以切换到想要的窗口，输入 Tmux 前缀和一个冒号呼出命令提示行，然后输入：\n\n```\n:setw synchronize-panes\n```\n\n你可以指定开或关，否则重复执行命令会在两者间切换。\n这个选项值针对某个窗口有效，不会影响别的会话和窗口。\n完事儿之后再次执行命令来关闭。[帮助](http://blog.sanctum.geek.nz/sync-tmux-panes/)\n\n\n## 调整窗格尺寸\n\n如果你不喜欢默认布局，可以重调窗格的尺寸。虽然这很容易实现，但一般不需要这么干。这几个命令用来调整窗格：\n\n    PREFIX : resize-pane -D          当前窗格向下扩大 1 格\n    PREFIX : resize-pane -U          当前窗格向上扩大 1 格\n    PREFIX : resize-pane -L          当前窗格向左扩大 1 格\n    PREFIX : resize-pane -R          当前窗格向右扩大 1 格\n    PREFIX : resize-pane -D 20       当前窗格向下扩大 20 格\n    PREFIX : resize-pane -t 2 -L 20  编号为 2 的窗格向左扩大 20 格\n    \n    \n## 文本复制模式：\n\n按下 `PREFIX-[` 进入文本复制模式。可以使用方向键在屏幕中移动光标。默认情况下，方向键是启用的。在配置文件中启用 Vim 键盘布局来切换窗口、调整窗格大小。Tmux 也支持 Vi 模式。要是想启用 Vi 模式，只需要把下面这一行添加到 .tmux.conf 中：\n\n    setw -g mode-keys vi\n\n启用这条配置后，就可以使用 h、j、k、l 来移动光标了。\n\n想要退出文本复制模式的话，按下回车键就可以了。然后按下 `PREFIX-]` 粘贴刚才复制的文本。\n\n一次移动一格效率低下，在 Vi 模式启用的情况下，可以辅助一些别的快捷键高效工作。\n\n例如，可以使用 w 键逐词移动，使用 b 键逐词回退。使用 f 键加上任意字符跳转到当前行第一次出现该字符的位置，使用 F 键达到相反的效果。\n\n    vi             emacs        功能\n    ^              M-m          反缩进\n    Escape         C-g          清除选定内容\n    Enter          M-w          复制选定内容\n    j              Down         光标下移\n    h              Left         光标左移\n    l              Right        光标右移\n    L                           光标移到尾行\n    M              M-r          光标移到中间行\n    H              M-R          光标移到首行\n    k              Up           光标上移\n    d              C-u          删除整行\n    D              C-k          删除到行末\n    $              C-e          移到行尾\n    :              g            前往指定行\n    C-d            M-Down       向下滚动半屏\n    C-u            M-Up         向上滚动半屏\n    C-f            Page down    下一页\n    w              M-f          下一个词\n    p              C-y          粘贴\n    C-b            Page up      上一页\n    b              M-b          上一个词\n    q              Escape       退出\n    C-Down or J    C-Down       向下翻\n    C-Up or K      C-Up         向下翻\n    n              n            继续搜索\n    ?              C-r          向前搜索\n    /              C-s          向后搜索\n    0              C-a          移到行首\n    Space          C-Space      开始选中\n                   C-t          字符调序\n\n## 杂项：\n\n    d  退出 tmux（tmux 仍在后台运行）\n    t  窗口中央显示一个数字时钟\n    ?  列出所有快捷键\n    :  命令提示符\n\n## 配置选项：\n\n    # 鼠标支持 - 设置为 on 来启用鼠标(与 2.1 之前的版本有区别，请自行查阅 man page)\n    * set -g mouse on\n\n    # 设置默认终端模式为 256color\n    set -g default-terminal \"screen-256color\"\n\n    # 启用活动警告\n    setw -g monitor-activity on\n    set -g visual-activity on\n\n    # 居中窗口列表\n    set -g status-justify centre\n\n    # 最大化/恢复窗格\n    unbind Up bind Up new-window -d -n tmp \\; swap-pane -s tmp.1 \\; select-window -t tmp\n    unbind Down\n    bind Down last-window \\; swap-pane -s tmp.1 \\; kill-window -t tmp\n\n## 参考配置文件（~/.tmux.conf）：\n\n下面这份配置是我使用 Tmux 几年来逐渐精简后的配置，请自取。\n\n```bash\n# -----------------------------------------------------------------------------\n# Tmux 基本配置 - 要求 Tmux >= 2.3\n# 如果不想使用插件，只需要将此节的内容写入 ~/.tmux.conf 即可\n# -----------------------------------------------------------------------------\n\n# C-b 和 VIM 冲突，修改 Prefix 组合键为 Control-Z，按键距离近\nset -g prefix C-z\n\nset -g base-index         1     # 窗口编号从 1 开始计数\nset -g display-panes-time 10000 # PREFIX-Q 显示编号的驻留时长，单位 ms\nset -g mouse              on    # 开启鼠标\nset -g pane-base-index    1     # 窗格编号从 1 开始计数\nset -g renumber-windows   on    # 关掉某个窗口后，编号重排\n\nsetw -g allow-rename      off   # 禁止活动进程修改窗口名\nsetw -g automatic-rename  off   # 禁止自动命名新窗口\nsetw -g mode-keys         vi    # 进入复制模式的时候使用 vi 键位（默认是 EMACS）\n\n# -----------------------------------------------------------------------------\n# 使用插件 - via tpm\n#   1. 执行 git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm\n#   2. 执行 bash ~/.tmux/plugins/tpm/bin/install_plugins\n# -----------------------------------------------------------------------------\n\nsetenv -g TMUX_PLUGIN_MANAGER_PATH '~/.tmux/plugins'\n\n# 推荐的插件（请去每个插件的仓库下读一读使用教程）\nset -g @plugin 'seebi/tmux-colors-solarized'\nset -g @plugin 'tmux-plugins/tmux-pain-control'\nset -g @plugin 'tmux-plugins/tmux-prefix-highlight'\nset -g @plugin 'tmux-plugins/tmux-resurrect'\nset -g @plugin 'tmux-plugins/tmux-sensible'\nset -g @plugin 'tmux-plugins/tmux-yank'\nset -g @plugin 'tmux-plugins/tpm'\n\n# tmux-resurrect\nset -g @resurrect-dir '~/.tmux/resurrect'\n\n# tmux-prefix-highlight\nset -g status-right '#{prefix_highlight} #H | %a %Y-%m-%d %H:%M'\nset -g @prefix_highlight_show_copy_mode 'on'\nset -g @prefix_highlight_copy_mode_attr 'fg=white,bg=blue'\n\n# 初始化 TPM 插件管理器 (放在配置文件的最后)\nrun '~/.tmux/plugins/tpm/tpm'\n\n# -----------------------------------------------------------------------------\n# 结束\n# -----------------------------------------------------------------------------\n```","lang":"en"},"__N_SSG":true}