{"pageProps":{"post":{"slug":"开发了一个帮我生成java类的库GeneratorX","title":"开发了一个帮我生成java类的库GeneratorX.md","mdsource":"md/开发了一个帮我生成java类的库GeneratorX.md","date":" 2017/01/07 23:27:30","category":"开源"},"content":"title: 开发了一个帮我生成java类的库GeneratorX\ndate: 2017/01/07 23:27:30\nupdated: 2017/01/10 11:36:02\ncategories:\n- 技术\n---\n写一个标准的java类确实太累了，需要如下方法和代码段，\n* 默认构造函数　和　非默认构造函数\n* get set\n* hascode\n* toString\n* equals\n* implements Parcelable 需要的代码\n\n就算你只有三个字段，等你写好了，差不多100行+，心太累所以想要一个自动帮我生成的，之前找了几个生成代码的第三方的库，帮我生成javaclass的代码的库，找到一些，但是发现对我并不合适，要么序列化不支持，要么因为类的定义的特殊导致json框架无法处理的问题，还有无法修改字段的问题杂七杂八的。\n\n> 一直使用一个IDEA的插件，帮我生成一些代码，但是发现那个插件有些bug，生成的代码有时候时错误的。\n# \n于是我就自己操刀写了一个，[github在此](https://github.com/BruceWind/GeneratorX)。\n\n# GeneratorX\n帮助项目开发时，自动生成类的代码。\n\n会自动生成如下代码\n* 默认构造函数　和　非默认构造函数\n* get set\n* hascode\n* toString\n* equals\n* implements Parcelable 需要的代码\n\n-------------------\n## 使用\n\n先下载jar包：[点我下载](https://github.com/BruceWind/GeneratorX/raw/master/other/generatorclassx-1.0.2.jar)\n### 1.apt依赖\n以为涉及到编译时生成，所以需要apt插件，apt是gradle的一个插件，他使注解处理器生成的代码能被Android Studio正确的引用。\n教程：[http://code.neenbedankt.com/gradle-android-apt-plugin/](http://code.neenbedankt.com/gradle-android-apt-plugin/)\n\n### 2.gradle中使用apt依赖javapoet和jar\n\n```\n\n    apt fileTree(dir: 'libs', include: ['*.jar'])//这句加的\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    \n    apt 'com.squareup:javapoet:1.4.0'\n    compile 'com.squareup:javapoet:1.4.0'\n```\n\n##　3.添加一个注解　\n```\n@SimpleGenerator　　\npublic class CLName\n\n可选　implements Parcelable　如果你需要做序列化的话　 \n```\n## 开始写java代码：\n\n当我写出如下代码,我build一下\n```\n@SimpleGenerator\npublic abstract class PersonBean implements Parcelable {\n\n    public Enum s;\n    public String name;\n    public int age = 0;\n\n    public CharSequence str;\n\n}\n```\nbuild一下自动帮我生成一个类 \n```\npackage com.androidyuan.model;\n\nimport android.os.Parcel;\nimport android.os.Parcelable;\nimport android.text.TextUtils;\nimport com.androidyuan.Helper.ClsHelper;\nimport java.lang.CharSequence;\nimport java.lang.Enum;\nimport java.lang.Object;\nimport java.lang.Override;\nimport java.lang.String;\n\npublic class PersonBeanX extends PersonBean {\n  public static final Parcelable.Creator<PersonBeanX> CREATOR = new Parcelable.Creator<PersonBeanX>() {\n    @Override\n    public PersonBeanX createFromParcel(Parcel in) {\n      return new PersonBeanX(in);\n    }\n\n    @Override\n    public PersonBeanX[] newArray(int size) {\n      return new PersonBeanX[size];\n    }\n  };\n\n  private Enum s;\n\n  private String name;\n\n  private int age;\n\n  private CharSequence str;\n\n  public PersonBeanX() {\n  }\n\n  public PersonBeanX(Enum s, String name, int age, CharSequence str) {\n    this.s = s;\n    this.name = name;\n    this.age = age;\n    this.str = str;\n  }\n\n  public PersonBeanX(Parcel in) {\n    this.s = Enum.valueOf(Enum.class, in.readString());\n    this.name = in.readString();\n    this.age = in.readInt();\n    this.str = TextUtils.CHAR_SEQUENCE_CREATOR.createFromParcel(in);\n  }\n\n  @Override\n  public void writeToParcel(Parcel dest, int flags) {\n    dest.writeSerializable(s);\n    dest.writeInt(age);\n    TextUtils.writeToParcel(str, dest, flags);\n  }\n\n  public void setS(Enum s) {\n    this.s = s;\n  }\n\n  public Enum getS() {\n    return this.s;\n  }\n\n  public void setName(String name) {\n    this.name = name;\n  }\n\n  public String getName() {\n    return this.name;\n  }\n\n  public void setAge(int age) {\n    this.age = age;\n  }\n\n  public int getAge() {\n    return this.age;\n  }\n\n  public void setStr(CharSequence str) {\n    this.str = str;\n  }\n\n  public CharSequence getStr() {\n    return this.str;\n  }\n\n  @Override\n  public int describeContents() {\n    return 0;\n  }\n\n  @Override\n  public int hashCode() {\n    return ClsHelper.hashCode(s , name , age , str);\n  }\n\n  @Override\n  public boolean equals(Object o) {\n\n        if (o == null) return false;\n        if (o == this) return true;\n        if (o instanceof PersonBeanX) {\n        \tif (o.hashCode() == this.hashCode()) return true;\n        }\n        return false;\n  }\n\n  @Override\n  public String toString() {\n    return \"PersonBeanX{\"+\"s =  \"+s+\",\"+\"name =  \"+name+\",\"+\"age =  \"+age+\",\"+\"str =  \"+str.toString()+\"}\";\n  }\n}\n\n```\n\n# \n\n-------------------------\n\n代码写的比较急，两周不到完成，应该有些缺陷，欢迎提[issues](https://github.com/BruceWind/GeneratorX/issues/new)。\n\n## 鸣谢\n\n[https://github.com/square/javapoet](https://github.com/square/javapoet)\n\n[http://code.neenbedankt.com/gradle-android-apt-plugin/](http://code.neenbedankt.com/gradle-android-apt-plugin/)","lang":"cn"},"__N_SSG":true}