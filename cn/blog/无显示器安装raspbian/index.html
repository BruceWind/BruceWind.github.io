<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1, width=device-width"/><meta name="emotion-insertion-point" content=""/><title>无显示器安装raspbian.md<!-- --> - BruceWind&#x27;s Blog</title><meta name="description" content="无显示器安装raspbian.md - 几年后回看会觉得写的太烂"/><meta property="og:title" content="无显示器安装raspbian.md"/><meta property="og:type" content="article"/><meta property="article:published_time" content=" 2016/12/19 00:45:19"/><meta name="next-head-count" content="8"/><meta charSet="utf-8"/><meta name="keywords" content="NDK,JNI,Android Dev,android,androidyuan,性能优化,Linux,developer"/><meta name="description" content="BruceWind&#x27;s personal blog - Android development, Linux, and more."/><meta name="robots" content="index,follow"/><meta name="google" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="author" content="bruce"/><link rel="icon" href="/favicon.ico"/><meta name="theme-color" content="#000000"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LGE1LT9YJG"></script><script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', 'G-LGE1LT9YJG');
              </script><style data-emotion="mui-style-global o6gwfi">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="mui-style 17ro72p 1cp6o32 79elbk 1qo0fs4 1uf4bbi 1m9pwf3 19gndve 1ju1kxc k1u9gz 6xugel vubbuv gtvj52 1x1vlev vax71z">.mui-style-17ro72p{width:100%;min-height:100vh;background-color:#fff;padding:16px;}.mui-style-1cp6o32{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border-radius:4px;box-shadow:0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12);padding:24px;}.mui-style-79elbk{position:relative;}.mui-style-1qo0fs4{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;width:58px;height:38px;overflow:hidden;padding:12px;box-sizing:border-box;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;z-index:0;vertical-align:middle;width:62px;height:34px;padding:7px;margin:8px;}@media print{.mui-style-1qo0fs4{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-style-1qo0fs4 .MuiSwitch-switchBase{margin:1px;padding:0;-webkit-transform:translateX(6px);-moz-transform:translateX(6px);-ms-transform:translateX(6px);transform:translateX(6px);}.mui-style-1qo0fs4 .MuiSwitch-switchBase.Mui-checked{color:#fff;-webkit-transform:translateX(22px);-moz-transform:translateX(22px);-ms-transform:translateX(22px);transform:translateX(22px);}.mui-style-1qo0fs4 .MuiSwitch-switchBase.Mui-checked .MuiSwitch-thumb:before{background-image:url('data:image/svg+xml;utf8,<?xml version="1.0" ?><svg height="20" width="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g><path d="M0 0h24v24H0z" fill="none"/><path fill="white" d="M12 19a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5.5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm11 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zM13 2v2h6v2h-1.968a18.222 18.222 0 0 1-3.621 6.302 14.685 14.685 0 0 0 5.327 3.042l-.536 1.93A16.685 16.685 0 0 1 12 13.726a16.696 16.696 0 0 1-6.202 3.547l-.536-1.929a14.7 14.7 0 0 0 5.327-3.042 18.077 18.077 0 0 1-2.822-4.3h2.24A16.031 16.031 0 0 0 12 10.876a16.168 16.168 0 0 0 2.91-4.876L5 6V4h6V2h2z"/></g></svg>');}.mui-style-1qo0fs4 .MuiSwitch-switchBase.Mui-checked+.MuiSwitch-track{opacity:1;background-color:#aab4be;}.mui-style-1qo0fs4 .MuiSwitch-thumb{background-color:#001e3c;width:32px;height:32px;}.mui-style-1qo0fs4 .MuiSwitch-thumb:before{content:'';position:absolute;width:100%;height:100%;left:0;top:0;background-repeat:no-repeat;-webkit-background-position:center;background-position:center;background-image:url('data:image/svg+xml;utf8,<?xml version="1.0" ?><svg height="20" width="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none" /><path fill="white" d="M14 10h2v.757a4.5 4.5 0 0 1 7 3.743V20h-2v-5.5c0-1.43-1.175-2.5-2.5-2.5S16 13.07 16 14.5V20h-2V10zm-2-6v2H4v5h8v2H4v5h8v2H2V4h10z"/></svg>');}.mui-style-1qo0fs4 .MuiSwitch-track{opacity:1;background-color:#aab4be;border-radius:10px;}.mui-style-1uf4bbi{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;padding:9px;border-radius:50%;position:absolute;top:0;left:0;z-index:1;color:#fff;-webkit-transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,-webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.mui-style-1uf4bbi::-moz-focus-inner{border-style:none;}.mui-style-1uf4bbi.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-style-1uf4bbi{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-style-1uf4bbi.Mui-checked{-webkit-transform:translateX(20px);-moz-transform:translateX(20px);-ms-transform:translateX(20px);transform:translateX(20px);}.mui-style-1uf4bbi.Mui-disabled{color:#f5f5f5;}.mui-style-1uf4bbi.Mui-checked+.MuiSwitch-track{opacity:0.5;}.mui-style-1uf4bbi.Mui-disabled+.MuiSwitch-track{opacity:0.12;}.mui-style-1uf4bbi .MuiSwitch-input{left:-100%;width:300%;}.mui-style-1uf4bbi:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.mui-style-1uf4bbi:hover{background-color:transparent;}}.mui-style-1uf4bbi.Mui-checked{color:#1976d2;}.mui-style-1uf4bbi.Mui-checked:hover{background-color:rgba(25, 118, 210, 0.04);}@media (hover: none){.mui-style-1uf4bbi.Mui-checked:hover{background-color:transparent;}}.mui-style-1uf4bbi.Mui-checked.Mui-disabled{color:rgb(167, 202, 237);}.mui-style-1uf4bbi.Mui-checked+.MuiSwitch-track{background-color:#1976d2;}.mui-style-1m9pwf3{cursor:inherit;position:absolute;opacity:0;width:100%;height:100%;top:0;left:0;margin:0;padding:0;z-index:1;}.mui-style-19gndve{box-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);background-color:currentColor;width:20px;height:20px;border-radius:50%;}.mui-style-1ju1kxc{height:100%;width:100%;border-radius:7px;z-index:-1;-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;background-color:#000;opacity:0.38;}.mui-style-k1u9gz{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 8px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#1976d2;margin-bottom:16px;}.mui-style-k1u9gz::-moz-focus-inner{border-style:none;}.mui-style-k1u9gz.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-style-k1u9gz{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-style-k1u9gz:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(25, 118, 210, 0.04);}@media (hover: none){.mui-style-k1u9gz:hover{background-color:transparent;}}.mui-style-k1u9gz.Mui-disabled{color:rgba(0, 0, 0, 0.26);}.mui-style-6xugel{display:inherit;margin-right:8px;margin-left:-4px;}.mui-style-6xugel>*:nth-of-type(1){font-size:20px;}.mui-style-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}.mui-style-gtvj52{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:2.125rem;line-height:1.235;letter-spacing:0.00735em;margin-bottom:0.35em;}.mui-style-1x1vlev{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:0.875rem;line-height:1.43;letter-spacing:0.01071em;margin-bottom:0.35em;color:rgba(0, 0, 0, 0.6);}.mui-style-vax71z{margin:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;border-width:0;border-style:solid;border-color:rgba(0, 0, 0, 0.12);border-bottom-width:thin;margin-top:16px;margin-bottom:16px;}</style><link rel="preload" href="/_next/static/css/345ff263c1768dbb.css" as="style"/><link rel="stylesheet" href="/_next/static/css/345ff263c1768dbb.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-6ef43a8d4a395f49.js" defer=""></script><script src="/_next/static/chunks/framework-64ad27b21261a9ce.js" defer=""></script><script src="/_next/static/chunks/main-5b2299ded1a46c83.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4f0aaa3a6ba99024.js" defer=""></script><script src="/_next/static/chunks/34-75ae01f5fa578a9a.js" defer=""></script><script src="/_next/static/chunks/995-a5f98cc3a4d14286.js" defer=""></script><script src="/_next/static/chunks/771-702e6dcd51d5534b.js" defer=""></script><script src="/_next/static/chunks/pages/%5Blang%5D/blog/%5Bslug%5D-beca72dadde25cc7.js" defer=""></script><script src="/_next/static/oGV2rxdqus2YbqQdghFpZ/_buildManifest.js" defer=""></script><script src="/_next/static/oGV2rxdqus2YbqQdghFpZ/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="MuiBox-root mui-style-17ro72p"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation3 mui-style-1cp6o32"><div class="MuiBox-root mui-style-79elbk"><div style="position:fixed;top:22px;right:15px;z-index:1300"><span class="MuiSwitch-root MuiSwitch-sizeMedium mui-style-1qo0fs4"><span class="MuiButtonBase-root MuiSwitch-switchBase MuiSwitch-colorPrimary Mui-checked PrivateSwitchBase-root MuiSwitch-switchBase MuiSwitch-colorPrimary Mui-checked Mui-checked mui-style-1uf4bbi"><input class="PrivateSwitchBase-input MuiSwitch-input mui-style-1m9pwf3" type="checkbox" checked=""/><span class="MuiSwitch-thumb mui-style-19gndve"></span></span><span class="MuiSwitch-track mui-style-1ju1kxc"></span></span></div><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorPrimary MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorPrimary mui-style-k1u9gz" tabindex="0" href="/cn/"><span class="MuiButton-icon MuiButton-startIcon MuiButton-iconSizeMedium mui-style-6xugel"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-style-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIcon"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"></path></svg></span>返回列表</a><h1 class="MuiTypography-root MuiTypography-h4 MuiTypography-gutterBottom mui-style-gtvj52">无显示器安装raspbian.md</h1><p class="MuiTypography-root MuiTypography-body2 MuiTypography-gutterBottom mui-style-1x1vlev">几年后回看会觉得写的太烂<!-- --> | <!-- --> 2016/12/19 00:45:19</p><hr class="MuiDivider-root MuiDivider-fullWidth mui-style-vax71z"/><div class="markdown-body"><p>title: 无显示器安装raspbian
date: 2016/12/19 00:45:19
updated: 2017/01/02 18:27:38
categories:</p>
<ul>
<li>技术</li>
</ul>
<hr/>
<blockquote>
<p>文章写了很久了，一致都没亮出来。</p>
</blockquote>
<p>下载 <a href="https://www.raspberrypi.org/downloads/raspbian/">raspbian jessie lite</a> （无GUI版本），用一个老旧的2GB内存卡，烧录，空间都剩余800M左右。</p>
<pre><code>最喜欢无GUI版本，命令行舒服。
</code></pre>
<h2>1.烧录SD卡</h2>
<pre><code>$ cd 下载
$ sudo dd if=2016-xx-xx-raspbian-jessie-lite.img of=/dev/sdb bs=4M
//最新的目前是什么版本我已经搞不清楚了。
</code></pre>
<h2>2.配置WIFI和连接密码</h2>
<p>烧录完成之后，重新插拔SD卡。
然后看到有个1.3G的盘子里，一堆的linux文件。</p>
<h1></h1>
<p><strong>/etc/wpa_supplicant/wpa_supplicant.conf</strong>这个文件才是配置wifi和密码的。</p>
<pre><code>sudo gedit /etc/wpa_supplicant/wpa_supplicant.conf
</code></pre>
<p>在文件的最后一行之后追加：</p>
<pre><code>network={
    ssid=&quot;testing&quot;
    psk=&quot;testingPassword&quot;
}
</code></pre>
<blockquote>
<p>有些同学，咳咳，那什么，自己家的wifi名字起得太长了，怕拼错的，ubuntu或者mac下可以用iwconfig命令获取一下，然后<strong>ctrl+shift+C</strong>拷贝一下，再写入到这个文件中。</p>
</blockquote>
<h2>3.启用ssh</h2>
<p>a.在那个盘子下创建一个空白文件即可。</p>
<pre><code>sudo vi etc/SSHFLAG
</code></pre>
<h1></h1>
<p>b.修改一个文件/etc/rc.local 追加如下代码在第一行。</p>
<pre><code>if [ -e /etc/SSHFLAG ]; then
  /usr/sbin/update-rc.d -f ssh defaults
  /bin/rm /etc/SSHFLAG
  /sbin/shutdown -r now
fi
</code></pre>
<p>从电脑上拔掉sd卡，插RPi上，开机。</p>
<h1></h1>
<p>c. 启动后，等待重启（也许两分钟），这之后你可以ping到RPi的IP，如果确定，关闭RPi，拔掉SD卡，再次编辑文件/etc/rc.local与电脑。
插入如下代码，到第一行。</p>
<pre><code>sudo vi /etc/init.d/ssh start
</code></pre>
<h1></h1>
<h2>4.使用nmap扫描 局域网中 是否存在树莓派设备</h2>
<pre><code>$ sudo nmap 192.168.199.1-255

Starting Nmap 6.47 ( http://nmap.org ) at 2016-12-19 01:01 CST
Nmap scan report for Hiwifi.lan (192.168.199.1)
Host is up (0.00088s latency).
Not shown: 993 closed ports
PORT     STATE SERVICE
53/tcp   open  domain
80/tcp   open  http
81/tcp   open  hosts2-ns
82/tcp   open  xfer
83/tcp   open  mit-ml-dev
443/tcp  open  https
5000/tcp open  upnp
MAC Address: D4:EE:07:13:C9:46 (Hiwifi Co.)

Nmap scan report for 192.168.199.117
Host is up (0.0013s latency).
Not shown: 999 closed ports
PORT   STATE SERVICE
22/tcp open  ssh
MAC Address: B8:27:EB:46:73:43 (Raspberry Pi Foundation)

Nmap scan report for android-a3929929ec50096a.lan (192.168.199.207)
Host is up (0.0022s latency).
All 1000 scanned ports on android-a3929929ec50096a.lan (192.168.199.207) are closed
MAC Address: 80:41:4E:D5:EE:13 (BBK Electronics)

Nmap scan report for raspberrypi.lan (192.168.199.218)
Host is up (0.0013s latency).
Not shown: 999 closed ports
PORT   STATE SERVICE
22/tcp open  ssh
MAC Address: B8:27:EB:13:26:16 (Raspberry Pi Foundation)

Nmap scan report for wei-MacBookAir.lan (192.168.199.124)
Host is up (0.0000070s latency).
Not shown: 999 closed ports
PORT   STATE SERVICE
22/tcp open  ssh

Nmap done: 255 IP addresses (5 hosts up) scanned in 193.37 seconds&#x27;


</code></pre>
<p>单独扫描117这个ip，查看是否开启了ssh的22端口。</p>
<pre><code>
$ sudo nmap -O 192.168.199.117

&#x27;
[sudo] wei 的密码： 

Starting Nmap 6.47 ( http://nmap.org ) at 2016-12-19 01:23 CST
Nmap scan report for raspberrypi.lan (192.168.199.117)
Host is up (0.0050s latency).
Not shown: 999 closed ports
PORT   STATE SERVICE
22/tcp open  ssh
MAC Address: B8:27:EB:46:73:43 (Raspberry Pi Foundation)
Device type: general purpose
Running: Linux 3.X
OS CPE: cpe:/o:linux:linux_kernel:3
OS details: Linux 3.11 - 3.14
Network Distance: 1 hop

OS detection performed. Please report any incorrect results at http://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 21.84 seconds&#x27;


</code></pre>
<p>日志上显示已经开启了这个端口，接下来。我们ssh登录一下吧。</p>
<pre><code>$ ssh pi@192.168.199.117
&#x27;The authenticity of host 192.168.199.117 (192.168.199.117) cant be established.
ECDSA key fingerprint is SHA256:337sCVUu6oxJn7sCEy1VbNeijLqdajX/JSGkiCC7jL0.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added &#x27;192.168.199.117&#x27; (ECDSA) to the list of known hosts.
pi@192.168.199.117&#x27;&#x27;s password: 

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Fri Nov 25 18:01:05 2016

SSH is enabled and the default password for the &#x27;pi&#x27; user has not been changed.
This is a security risk - please login as the &#x27;pi&#x27; user and type &#x27;passwd&#x27; to set a new password.


pi@raspberrypi:~ $ cpuinfo
-bash: cpuinfo: command not found
pi@raspberrypi:~ $ cpuinfo
-bash: cpuinfo: command not found
pi@raspberrypi:~ $ lscpu
Architecture:          armv7l
Byte Order:            Little Endian
CPU(s):                4
On-line CPU(s) list:   0-3
Thread(s) per core:    1
Core(s) per socket:    4
Socket(s):             1
Model name:            ARMv7 Processor rev 4 (v7l)
CPU max MHz:           1200.0000
CPU min MHz:           600.0000
&#x27;
</code></pre>
<hr/>
<p>晒一张大图。</p>
<p><img src="assets/no_display_install_rpi.png" alt=""/></p></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"无显示器安装raspbian","title":"无显示器安装raspbian.md","mdsource":"md/无显示器安装raspbian.md","date":" 2016/12/19 00:45:19","category":"几年后回看会觉得写的太烂"},"content":"title: 无显示器安装raspbian\ndate: 2016/12/19 00:45:19\nupdated: 2017/01/02 18:27:38\ncategories:\n- 技术\n---\n\u003e 文章写了很久了，一致都没亮出来。\n\n下载 [raspbian jessie lite](https://www.raspberrypi.org/downloads/raspbian/) （无GUI版本），用一个老旧的2GB内存卡，烧录，空间都剩余800M左右。\n    \n    最喜欢无GUI版本，命令行舒服。\n## 1.烧录SD卡\n```\n$ cd 下载\n$ sudo dd if=2016-xx-xx-raspbian-jessie-lite.img of=/dev/sdb bs=4M\n//最新的目前是什么版本我已经搞不清楚了。\n```\n\n## 2.配置WIFI和连接密码 \n\n烧录完成之后，重新插拔SD卡。\n然后看到有个1.3G的盘子里，一堆的linux文件。\n#  \n**/etc/wpa_supplicant/wpa_supplicant.conf**这个文件才是配置wifi和密码的。\n\n```\nsudo gedit /etc/wpa_supplicant/wpa_supplicant.conf\n```\n在文件的最后一行之后追加：\n\n```\nnetwork={\n    ssid=\"testing\"\n    psk=\"testingPassword\"\n}\n```\n\n\u003e 有些同学，咳咳，那什么，自己家的wifi名字起得太长了，怕拼错的，ubuntu或者mac下可以用iwconfig命令获取一下，然后**ctrl+shift+C**拷贝一下，再写入到这个文件中。\n\n## 3.启用ssh\na.在那个盘子下创建一个空白文件即可。\n\n```\nsudo vi etc/SSHFLAG\n```\n# \nb.修改一个文件/etc/rc.local 追加如下代码在第一行。\n```\nif [ -e /etc/SSHFLAG ]; then\n  /usr/sbin/update-rc.d -f ssh defaults\n  /bin/rm /etc/SSHFLAG\n  /sbin/shutdown -r now\nfi\n```\n从电脑上拔掉sd卡，插RPi上，开机。\n# \nc. 启动后，等待重启（也许两分钟），这之后你可以ping到RPi的IP，如果确定，关闭RPi，拔掉SD卡，再次编辑文件/etc/rc.local与电脑。\n插入如下代码，到第一行。\n```\nsudo vi /etc/init.d/ssh start\n```\n# \n\n## 4.使用nmap扫描 局域网中 是否存在树莓派设备\n\n```\n$ sudo nmap 192.168.199.1-255\n\nStarting Nmap 6.47 ( http://nmap.org ) at 2016-12-19 01:01 CST\nNmap scan report for Hiwifi.lan (192.168.199.1)\nHost is up (0.00088s latency).\nNot shown: 993 closed ports\nPORT     STATE SERVICE\n53/tcp   open  domain\n80/tcp   open  http\n81/tcp   open  hosts2-ns\n82/tcp   open  xfer\n83/tcp   open  mit-ml-dev\n443/tcp  open  https\n5000/tcp open  upnp\nMAC Address: D4:EE:07:13:C9:46 (Hiwifi Co.)\n\nNmap scan report for 192.168.199.117\nHost is up (0.0013s latency).\nNot shown: 999 closed ports\nPORT   STATE SERVICE\n22/tcp open  ssh\nMAC Address: B8:27:EB:46:73:43 (Raspberry Pi Foundation)\n\nNmap scan report for android-a3929929ec50096a.lan (192.168.199.207)\nHost is up (0.0022s latency).\nAll 1000 scanned ports on android-a3929929ec50096a.lan (192.168.199.207) are closed\nMAC Address: 80:41:4E:D5:EE:13 (BBK Electronics)\n\nNmap scan report for raspberrypi.lan (192.168.199.218)\nHost is up (0.0013s latency).\nNot shown: 999 closed ports\nPORT   STATE SERVICE\n22/tcp open  ssh\nMAC Address: B8:27:EB:13:26:16 (Raspberry Pi Foundation)\n\nNmap scan report for wei-MacBookAir.lan (192.168.199.124)\nHost is up (0.0000070s latency).\nNot shown: 999 closed ports\nPORT   STATE SERVICE\n22/tcp open  ssh\n\nNmap done: 255 IP addresses (5 hosts up) scanned in 193.37 seconds'\n\n\n```\n\n单独扫描117这个ip，查看是否开启了ssh的22端口。\n```\n\n$ sudo nmap -O 192.168.199.117\n\n'\n[sudo] wei 的密码： \n\nStarting Nmap 6.47 ( http://nmap.org ) at 2016-12-19 01:23 CST\nNmap scan report for raspberrypi.lan (192.168.199.117)\nHost is up (0.0050s latency).\nNot shown: 999 closed ports\nPORT   STATE SERVICE\n22/tcp open  ssh\nMAC Address: B8:27:EB:46:73:43 (Raspberry Pi Foundation)\nDevice type: general purpose\nRunning: Linux 3.X\nOS CPE: cpe:/o:linux:linux_kernel:3\nOS details: Linux 3.11 - 3.14\nNetwork Distance: 1 hop\n\nOS detection performed. Please report any incorrect results at http://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 21.84 seconds'\n\n\n```\n日志上显示已经开启了这个端口，接下来。我们ssh登录一下吧。\n\n```\n$ ssh pi@192.168.199.117\n'The authenticity of host 192.168.199.117 (192.168.199.117) cant be established.\nECDSA key fingerprint is SHA256:337sCVUu6oxJn7sCEy1VbNeijLqdajX/JSGkiCC7jL0.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '192.168.199.117' (ECDSA) to the list of known hosts.\npi@192.168.199.117''s password: \n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Fri Nov 25 18:01:05 2016\n\nSSH is enabled and the default password for the 'pi' user has not been changed.\nThis is a security risk - please login as the 'pi' user and type 'passwd' to set a new password.\n\n\npi@raspberrypi:~ $ cpuinfo\n-bash: cpuinfo: command not found\npi@raspberrypi:~ $ cpuinfo\n-bash: cpuinfo: command not found\npi@raspberrypi:~ $ lscpu\nArchitecture:          armv7l\nByte Order:            Little Endian\nCPU(s):                4\nOn-line CPU(s) list:   0-3\nThread(s) per core:    1\nCore(s) per socket:    4\nSocket(s):             1\nModel name:            ARMv7 Processor rev 4 (v7l)\nCPU max MHz:           1200.0000\nCPU min MHz:           600.0000\n'\n```\n--------------------------\n晒一张大图。\n\n![](assets/no_display_install_rpi.png)\n\n","lang":"cn"},"__N_SSG":true},"page":"/[lang]/blog/[slug]","query":{"lang":"cn","slug":"无显示器安装raspbian"},"buildId":"oGV2rxdqus2YbqQdghFpZ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>