<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1, width=device-width"/><meta name="emotion-insertion-point" content=""/><title>android 顶部悬停效果 浮动布局.md<!-- --> - BruceWind&#x27;s Blog</title><meta name="description" content="android 顶部悬停效果 浮动布局.md - 几年后回看会觉得写的太烂"/><meta property="og:title" content="android 顶部悬停效果 浮动布局.md"/><meta property="og:type" content="article"/><meta property="article:published_time" content=" 2015/11/29 23:36:42"/><meta name="next-head-count" content="8"/><meta charSet="utf-8"/><meta name="keywords" content="NDK,JNI,Android Dev,android,androidyuan,性能优化,Linux,developer"/><meta name="description" content="BruceWind&#x27;s personal blog - Android development, Linux, and more."/><meta name="robots" content="index,follow"/><meta name="google" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="author" content="bruce"/><link rel="icon" href="/favicon.ico"/><meta name="theme-color" content="#000000"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LGE1LT9YJG"></script><script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
                gtag('config', 'G-LGE1LT9YJG');
              </script><style data-emotion="mui-style-global o6gwfi">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="mui-style 17ro72p 1cp6o32 79elbk 1qo0fs4 1uf4bbi 1m9pwf3 19gndve 1ju1kxc k1u9gz 6xugel vubbuv gtvj52 1x1vlev vax71z">.mui-style-17ro72p{width:100%;min-height:100vh;background-color:#fff;padding:16px;}.mui-style-1cp6o32{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;border-radius:4px;box-shadow:0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12);padding:24px;}.mui-style-79elbk{position:relative;}.mui-style-1qo0fs4{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;width:58px;height:38px;overflow:hidden;padding:12px;box-sizing:border-box;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;z-index:0;vertical-align:middle;width:62px;height:34px;padding:7px;margin:8px;}@media print{.mui-style-1qo0fs4{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-style-1qo0fs4 .MuiSwitch-switchBase{margin:1px;padding:0;-webkit-transform:translateX(6px);-moz-transform:translateX(6px);-ms-transform:translateX(6px);transform:translateX(6px);}.mui-style-1qo0fs4 .MuiSwitch-switchBase.Mui-checked{color:#fff;-webkit-transform:translateX(22px);-moz-transform:translateX(22px);-ms-transform:translateX(22px);transform:translateX(22px);}.mui-style-1qo0fs4 .MuiSwitch-switchBase.Mui-checked .MuiSwitch-thumb:before{background-image:url('data:image/svg+xml;utf8,<?xml version="1.0" ?><svg height="20" width="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g><path d="M0 0h24v24H0z" fill="none"/><path fill="white" d="M12 19a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5.5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm11 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zM13 2v2h6v2h-1.968a18.222 18.222 0 0 1-3.621 6.302 14.685 14.685 0 0 0 5.327 3.042l-.536 1.93A16.685 16.685 0 0 1 12 13.726a16.696 16.696 0 0 1-6.202 3.547l-.536-1.929a14.7 14.7 0 0 0 5.327-3.042 18.077 18.077 0 0 1-2.822-4.3h2.24A16.031 16.031 0 0 0 12 10.876a16.168 16.168 0 0 0 2.91-4.876L5 6V4h6V2h2z"/></g></svg>');}.mui-style-1qo0fs4 .MuiSwitch-switchBase.Mui-checked+.MuiSwitch-track{opacity:1;background-color:#aab4be;}.mui-style-1qo0fs4 .MuiSwitch-thumb{background-color:#001e3c;width:32px;height:32px;}.mui-style-1qo0fs4 .MuiSwitch-thumb:before{content:'';position:absolute;width:100%;height:100%;left:0;top:0;background-repeat:no-repeat;-webkit-background-position:center;background-position:center;background-image:url('data:image/svg+xml;utf8,<?xml version="1.0" ?><svg height="20" width="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none" /><path fill="white" d="M14 10h2v.757a4.5 4.5 0 0 1 7 3.743V20h-2v-5.5c0-1.43-1.175-2.5-2.5-2.5S16 13.07 16 14.5V20h-2V10zm-2-6v2H4v5h8v2H4v5h8v2H2V4h10z"/></svg>');}.mui-style-1qo0fs4 .MuiSwitch-track{opacity:1;background-color:#aab4be;border-radius:10px;}.mui-style-1uf4bbi{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;padding:9px;border-radius:50%;position:absolute;top:0;left:0;z-index:1;color:#fff;-webkit-transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,-webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;}.mui-style-1uf4bbi::-moz-focus-inner{border-style:none;}.mui-style-1uf4bbi.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-style-1uf4bbi{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-style-1uf4bbi.Mui-checked{-webkit-transform:translateX(20px);-moz-transform:translateX(20px);-ms-transform:translateX(20px);transform:translateX(20px);}.mui-style-1uf4bbi.Mui-disabled{color:#f5f5f5;}.mui-style-1uf4bbi.Mui-checked+.MuiSwitch-track{opacity:0.5;}.mui-style-1uf4bbi.Mui-disabled+.MuiSwitch-track{opacity:0.12;}.mui-style-1uf4bbi .MuiSwitch-input{left:-100%;width:300%;}.mui-style-1uf4bbi:hover{background-color:rgba(0, 0, 0, 0.04);}@media (hover: none){.mui-style-1uf4bbi:hover{background-color:transparent;}}.mui-style-1uf4bbi.Mui-checked{color:#1976d2;}.mui-style-1uf4bbi.Mui-checked:hover{background-color:rgba(25, 118, 210, 0.04);}@media (hover: none){.mui-style-1uf4bbi.Mui-checked:hover{background-color:transparent;}}.mui-style-1uf4bbi.Mui-checked.Mui-disabled{color:rgb(167, 202, 237);}.mui-style-1uf4bbi.Mui-checked+.MuiSwitch-track{background-color:#1976d2;}.mui-style-1m9pwf3{cursor:inherit;position:absolute;opacity:0;width:100%;height:100%;top:0;left:0;margin:0;padding:0;z-index:1;}.mui-style-19gndve{box-shadow:0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);background-color:currentColor;width:20px;height:20px;border-radius:50%;}.mui-style-1ju1kxc{height:100%;width:100%;border-radius:7px;z-index:-1;-webkit-transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;background-color:#000;opacity:0.38;}.mui-style-k1u9gz{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 8px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#1976d2;margin-bottom:16px;}.mui-style-k1u9gz::-moz-focus-inner{border-style:none;}.mui-style-k1u9gz.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-style-k1u9gz{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-style-k1u9gz:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(25, 118, 210, 0.04);}@media (hover: none){.mui-style-k1u9gz:hover{background-color:transparent;}}.mui-style-k1u9gz.Mui-disabled{color:rgba(0, 0, 0, 0.26);}.mui-style-6xugel{display:inherit;margin-right:8px;margin-left:-4px;}.mui-style-6xugel>*:nth-of-type(1){font-size:20px;}.mui-style-vubbuv{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentColor;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;}.mui-style-gtvj52{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:2.125rem;line-height:1.235;letter-spacing:0.00735em;margin-bottom:0.35em;}.mui-style-1x1vlev{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:0.875rem;line-height:1.43;letter-spacing:0.01071em;margin-bottom:0.35em;color:rgba(0, 0, 0, 0.6);}.mui-style-vax71z{margin:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;border-width:0;border-style:solid;border-color:rgba(0, 0, 0, 0.12);border-bottom-width:thin;margin-top:16px;margin-bottom:16px;}</style><link rel="preload" href="/_next/static/css/345ff263c1768dbb.css" as="style"/><link rel="stylesheet" href="/_next/static/css/345ff263c1768dbb.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-6ef43a8d4a395f49.js" defer=""></script><script src="/_next/static/chunks/framework-64ad27b21261a9ce.js" defer=""></script><script src="/_next/static/chunks/main-5b2299ded1a46c83.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4f0aaa3a6ba99024.js" defer=""></script><script src="/_next/static/chunks/34-75ae01f5fa578a9a.js" defer=""></script><script src="/_next/static/chunks/995-a5f98cc3a4d14286.js" defer=""></script><script src="/_next/static/chunks/771-702e6dcd51d5534b.js" defer=""></script><script src="/_next/static/chunks/pages/%5Blang%5D/blog/%5Bslug%5D-beca72dadde25cc7.js" defer=""></script><script src="/_next/static/GHV3Hdifg6RQFG6pfrsvS/_buildManifest.js" defer=""></script><script src="/_next/static/GHV3Hdifg6RQFG6pfrsvS/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="MuiBox-root mui-style-17ro72p"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation3 mui-style-1cp6o32"><div class="MuiBox-root mui-style-79elbk"><div style="position:fixed;top:22px;right:15px;z-index:1300"><span class="MuiSwitch-root MuiSwitch-sizeMedium mui-style-1qo0fs4"><span class="MuiButtonBase-root MuiSwitch-switchBase MuiSwitch-colorPrimary Mui-checked PrivateSwitchBase-root MuiSwitch-switchBase MuiSwitch-colorPrimary Mui-checked Mui-checked mui-style-1uf4bbi"><input class="PrivateSwitchBase-input MuiSwitch-input mui-style-1m9pwf3" type="checkbox" checked=""/><span class="MuiSwitch-thumb mui-style-19gndve"></span></span><span class="MuiSwitch-track mui-style-1ju1kxc"></span></span></div><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorPrimary MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorPrimary mui-style-k1u9gz" tabindex="0" href="/cn/"><span class="MuiButton-icon MuiButton-startIcon MuiButton-iconSizeMedium mui-style-6xugel"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-style-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIcon"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"></path></svg></span>返回列表</a><h1 class="MuiTypography-root MuiTypography-h4 MuiTypography-gutterBottom mui-style-gtvj52">android 顶部悬停效果 浮动布局.md</h1><p class="MuiTypography-root MuiTypography-body2 MuiTypography-gutterBottom mui-style-1x1vlev">几年后回看会觉得写的太烂<!-- --> | <!-- --> 2015/11/29 23:36:42</p><hr class="MuiDivider-root MuiDivider-fullWidth mui-style-vax71z"/><div class="markdown-body"><p>title: android 顶部悬停效果 浮动布局
date: 2015/11/29 23:36:42
updated: 2015/11/29 23:48:01
categories:</p>
<ul>
<li>技术</li>
</ul>
<hr/>
<p>来不及解释了，上代码：</p>
<pre><code class="language-xml">

    &lt;declare-styleable name=&quot;FloatScrollView&quot;&gt;
    &lt;!-- Positions the right edge of this view to the left of the given anchor view ID. --&gt;
    &lt;attr name=&quot;floatid&quot; format=&quot;reference&quot; /&gt;
        &lt;attr name=&quot;copyid&quot; format=&quot;reference&quot; /&gt;
    &lt;/declare-styleable&gt;
</code></pre>
<p>FLoatScrollView类</p>
<pre><code class="language-java">
package com.widgets;

import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.view.View;
import android.widget.ScrollView;

import com.mvp.R;

/**
 * Created by xxx on 15-10-14.
 */
public class FloatScrollView extends ScrollView {

    //需要浮动区域的顶部的view的高度  这里强制要求浮动区域的控件往上到达ScrollView  必须得是一个View
    View mFloatView;
    //代替展示浮动view
    View mFlowView;

    int flowid;
    int floatid;

    public FloatScrollView(Context context) {
        super(context);
    }

    public FloatScrollView(Context context, AttributeSet attrs) {
        super(context, attrs);
        initView(attrs);
    }

    public FloatScrollView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        initView(attrs);
    }

    private void initView(AttributeSet attrs)
    {
        TypedArray obtainStyled = getContext().obtainStyledAttributes(attrs, R.styleable.FloatScrollView);
        flowid=obtainStyled.getResourceId(R.styleable.FloatScrollView_copyid,0);
        floatid=obtainStyled.getResourceId(R.styleable.FloatScrollView_floatid, 0);
    }


    @Override
    protected void onDraw(Canvas canvas) {

	//这几句代码我也不想写在onDraw中 写在init方法里最好不过只是 那样子 无法find view
        mFloatView = getRootView().findViewById(floatid);
        mFlowView = getRootView().findViewById(flowid);
        super.onDraw(canvas);
    }

    @Override
    protected void onScrollChanged(int l, int t, int oldl, int oldt) {

        super.onScrollChanged(l, t, oldl, oldt);



        if(mFloatView != null &amp;&amp; mFlowView!=null) {

            if(t &gt;= mFloatView.getHeight()) {
                mFlowView.setVisibility(View.VISIBLE);
            } else {
                mFlowView.setVisibility(View.GONE);
            }
        }
    }
}


</code></pre>
<p>上图 ：</p>
<p><img src="assets/565b1d7eab6441515b000333.JPEG" alt=""/></p>
<h1></h1>
<p><img src="assets/565b1d7eab6441515b000334.JPEG" alt=""/></p>
<p>看布局代码记得寻找其中的 view_float_copy</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    android:orientation=&quot;vertical&quot;
    android:layout_width=&quot;match_parent&quot;
    android:background=&quot;@color/bg_layout&quot;
    android:layout_height=&quot;match_parent&quot;&gt;

    &lt;com.cores.widget.Topbar
        android:id=&quot;@+id/topbar&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot; /&gt;

    &lt;FrameLayout
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;&gt;



    &lt;com.widgets.FloatScrollView
        app:floatid=&quot;@+id/view_float&quot;
        app:copyid=&quot;@+id/view_float_copy&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:id=&quot;@+id/scrollView&quot; &gt;

    &lt;LinearLayout
        android:orientation=&quot;vertical&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;&gt;

    &lt;RelativeLayout
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:padding=&quot;10dp&quot;&gt;

        &lt;RelativeLayout
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:background=&quot;@drawable/corner_search_border_gray&quot;&gt;

            &lt;EditText
                style=&quot;@style/font14_gray_white&quot; android:hint=&quot;请输入会员卡号、姓名、手机号&quot; android:drawableRight=&quot;@drawable/user_search&quot;
                android:background=&quot;@color/clear&quot;
                android:layout_width=&quot;match_parent&quot;
                android:padding=&quot;6dp&quot; /&gt;


        &lt;/RelativeLayout&gt;
    &lt;/RelativeLayout&gt;

    &lt;RelativeLayout
        android:id=&quot;@+id/view_float&quot;
        android:background=&quot;@drawable/bordergray_topbot_stokwhite&quot;
        android:gravity=&quot;center_vertical&quot;
        style=&quot;@style/hor_container&quot;&gt;


        &lt;CheckBox
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:button=&quot;@drawable/selector_check&quot;
            android:text=&quot; 全选&quot;
            android:layout_centerVertical=&quot;true&quot;
            style=&quot;@style/font14_balck&quot;
            android:id=&quot;@+id/check_allsel&quot;
            android:checked=&quot;false&quot; /&gt;

        &lt;TextView
            style=&quot;@style/font13_gray&quot;
            android:id=&quot;@+id/txt_membercount&quot;
            android:textColor=&quot;@color/grey_a4a4a4&quot;
            android:text=&quot;共0位会员&quot;
            android:layout_centerVertical=&quot;true&quot;
            android:layout_toRightOf=&quot;@+id/check_allsel&quot;
            android:layout_toEndOf=&quot;@+id/check_allsel&quot;
            android:layout_marginLeft=&quot;15dp&quot;
            android:layout_marginStart=&quot;15dp&quot; /&gt;

        &lt;TextView
            style=&quot;@style/font14&quot;
            android:id=&quot;@+id/txt_btn_adduser&quot;
            android:textColor=&quot;@color/home_rad_txt_blue&quot;
            android:background=&quot;@drawable/corner_search_border_gray&quot;
            android:text=&quot;新增会员&quot;
            android:padding=&quot;5dp&quot;
            android:layout_centerVertical=&quot;true&quot;
            android:layout_alignParentRight=&quot;true&quot;
            android:layout_alignParentEnd=&quot;true&quot; /&gt;
    &lt;/RelativeLayout&gt;

    &lt;com.cores.widget.bugfixview.FixRowListView
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:id=&quot;@+id/list_member&quot;
        android:layout_gravity=&quot;center_horizontal&quot; /&gt;
    &lt;/LinearLayout&gt;

    &lt;/com.widgets.FloatScrollView&gt;


        &lt;RelativeLayout
            android:background=&quot;@drawable/bordergray_topbot_stokwhite&quot;
            android:gravity=&quot;center_vertical&quot;
            style=&quot;@style/hor_container&quot;
            android:id=&quot;@+id/view_float_copy&quot;
            android:visibility=&quot;gone&quot;&gt;


            &lt;CheckBox
                android:layout_width=&quot;wrap_content&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:button=&quot;@drawable/selector_check&quot;
                android:text=&quot; 全选&quot;
                android:layout_centerVertical=&quot;true&quot;
                style=&quot;@style/font14_balck&quot;
                android:id=&quot;@+id/check_allsel_copy&quot;/&gt;

            &lt;TextView
                style=&quot;@style/font13_gray&quot;
                android:textColor=&quot;@color/grey_a4a4a4&quot;
                android:text=&quot;共0位会员&quot;
                android:layout_centerVertical=&quot;true&quot;
                android:layout_toRightOf=&quot;@+id/check_allsel_copy&quot;
                android:layout_toEndOf=&quot;@+id/check_allsel_copy&quot;
                android:layout_marginLeft=&quot;15dp&quot;
                android:layout_marginStart=&quot;15dp&quot; /&gt;

            &lt;TextView
                android:id=&quot;@+id/txt_btn_adduser_copy&quot;
                style=&quot;@style/font14&quot;
                android:textColor=&quot;@color/home_rad_txt_blue&quot;
                android:background=&quot;@drawable/corner_search_border_gray&quot;
                android:text=&quot;新增会员&quot;
                android:padding=&quot;5dp&quot;
                android:layout_centerVertical=&quot;true&quot;
                android:layout_alignParentRight=&quot;true&quot;
                android:layout_alignParentEnd=&quot;true&quot; /&gt;
        &lt;/RelativeLayout&gt;
    &lt;/FrameLayout&gt;
&lt;/LinearLayout&gt;


</code></pre>
<p>主要就是Frame布局 选择性的显示 那个copy的view，浮动的原理就是这样子的。</p></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"android 顶部悬停效果 浮动布局","title":"android 顶部悬停效果 浮动布局.md","mdsource":"md/android 顶部悬停效果 浮动布局.md","date":" 2015/11/29 23:36:42","category":"几年后回看会觉得写的太烂"},"content":"title: android 顶部悬停效果 浮动布局\ndate: 2015/11/29 23:36:42\nupdated: 2015/11/29 23:48:01\ncategories:\n- 技术\n---\n来不及解释了，上代码：\n\n``` xml\n\n\n    \u003cdeclare-styleable name=\"FloatScrollView\"\u003e\n    \u003c!-- Positions the right edge of this view to the left of the given anchor view ID. --\u003e\n    \u003cattr name=\"floatid\" format=\"reference\" /\u003e\n        \u003cattr name=\"copyid\" format=\"reference\" /\u003e\n    \u003c/declare-styleable\u003e\n```\n\nFLoatScrollView类\n\n``` java\n\npackage com.widgets;\n\nimport android.content.Context;\nimport android.content.res.TypedArray;\nimport android.graphics.Canvas;\nimport android.util.AttributeSet;\nimport android.view.View;\nimport android.widget.ScrollView;\n\nimport com.mvp.R;\n\n/**\n * Created by xxx on 15-10-14.\n */\npublic class FloatScrollView extends ScrollView {\n\n    //需要浮动区域的顶部的view的高度  这里强制要求浮动区域的控件往上到达ScrollView  必须得是一个View\n    View mFloatView;\n    //代替展示浮动view\n    View mFlowView;\n\n    int flowid;\n    int floatid;\n\n    public FloatScrollView(Context context) {\n        super(context);\n    }\n\n    public FloatScrollView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        initView(attrs);\n    }\n\n    public FloatScrollView(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n\n        initView(attrs);\n    }\n\n    private void initView(AttributeSet attrs)\n    {\n        TypedArray obtainStyled = getContext().obtainStyledAttributes(attrs, R.styleable.FloatScrollView);\n        flowid=obtainStyled.getResourceId(R.styleable.FloatScrollView_copyid,0);\n        floatid=obtainStyled.getResourceId(R.styleable.FloatScrollView_floatid, 0);\n    }\n\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n\n\t//这几句代码我也不想写在onDraw中 写在init方法里最好不过只是 那样子 无法find view\n        mFloatView = getRootView().findViewById(floatid);\n        mFlowView = getRootView().findViewById(flowid);\n        super.onDraw(canvas);\n    }\n\n    @Override\n    protected void onScrollChanged(int l, int t, int oldl, int oldt) {\n\n        super.onScrollChanged(l, t, oldl, oldt);\n\n\n\n        if(mFloatView != null \u0026\u0026 mFlowView!=null) {\n\n            if(t \u003e= mFloatView.getHeight()) {\n                mFlowView.setVisibility(View.VISIBLE);\n            } else {\n                mFlowView.setVisibility(View.GONE);\n            }\n        }\n    }\n}\n\n\n```\n\n\n上图 ：  \n\n\n![](assets/565b1d7eab6441515b000333.JPEG)\n\n# \n\n![](assets/565b1d7eab6441515b000334.JPEG)\n\n\n看布局代码记得寻找其中的 view_float_copy\n\n```  xml\n\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\n\u003cLinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:orientation=\"vertical\"\n    android:layout_width=\"match_parent\"\n    android:background=\"@color/bg_layout\"\n    android:layout_height=\"match_parent\"\u003e\n\n    \u003ccom.cores.widget.Topbar\n        android:id=\"@+id/topbar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\" /\u003e\n\n    \u003cFrameLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\u003e\n\n\n\n    \u003ccom.widgets.FloatScrollView\n        app:floatid=\"@+id/view_float\"\n        app:copyid=\"@+id/view_float_copy\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/scrollView\" \u003e\n\n    \u003cLinearLayout\n        android:orientation=\"vertical\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\u003e\n\n    \u003cRelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:padding=\"10dp\"\u003e\n\n        \u003cRelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:background=\"@drawable/corner_search_border_gray\"\u003e\n\n            \u003cEditText\n                style=\"@style/font14_gray_white\" android:hint=\"请输入会员卡号、姓名、手机号\" android:drawableRight=\"@drawable/user_search\"\n                android:background=\"@color/clear\"\n                android:layout_width=\"match_parent\"\n                android:padding=\"6dp\" /\u003e\n\n\n        \u003c/RelativeLayout\u003e\n    \u003c/RelativeLayout\u003e\n\n    \u003cRelativeLayout\n        android:id=\"@+id/view_float\"\n        android:background=\"@drawable/bordergray_topbot_stokwhite\"\n        android:gravity=\"center_vertical\"\n        style=\"@style/hor_container\"\u003e\n\n\n        \u003cCheckBox\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:button=\"@drawable/selector_check\"\n            android:text=\" 全选\"\n            android:layout_centerVertical=\"true\"\n            style=\"@style/font14_balck\"\n            android:id=\"@+id/check_allsel\"\n            android:checked=\"false\" /\u003e\n\n        \u003cTextView\n            style=\"@style/font13_gray\"\n            android:id=\"@+id/txt_membercount\"\n            android:textColor=\"@color/grey_a4a4a4\"\n            android:text=\"共0位会员\"\n            android:layout_centerVertical=\"true\"\n            android:layout_toRightOf=\"@+id/check_allsel\"\n            android:layout_toEndOf=\"@+id/check_allsel\"\n            android:layout_marginLeft=\"15dp\"\n            android:layout_marginStart=\"15dp\" /\u003e\n\n        \u003cTextView\n            style=\"@style/font14\"\n            android:id=\"@+id/txt_btn_adduser\"\n            android:textColor=\"@color/home_rad_txt_blue\"\n            android:background=\"@drawable/corner_search_border_gray\"\n            android:text=\"新增会员\"\n            android:padding=\"5dp\"\n            android:layout_centerVertical=\"true\"\n            android:layout_alignParentRight=\"true\"\n            android:layout_alignParentEnd=\"true\" /\u003e\n    \u003c/RelativeLayout\u003e\n\n    \u003ccom.cores.widget.bugfixview.FixRowListView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/list_member\"\n        android:layout_gravity=\"center_horizontal\" /\u003e\n    \u003c/LinearLayout\u003e\n\n    \u003c/com.widgets.FloatScrollView\u003e\n\n\n        \u003cRelativeLayout\n            android:background=\"@drawable/bordergray_topbot_stokwhite\"\n            android:gravity=\"center_vertical\"\n            style=\"@style/hor_container\"\n            android:id=\"@+id/view_float_copy\"\n            android:visibility=\"gone\"\u003e\n\n\n            \u003cCheckBox\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:button=\"@drawable/selector_check\"\n                android:text=\" 全选\"\n                android:layout_centerVertical=\"true\"\n                style=\"@style/font14_balck\"\n                android:id=\"@+id/check_allsel_copy\"/\u003e\n\n            \u003cTextView\n                style=\"@style/font13_gray\"\n                android:textColor=\"@color/grey_a4a4a4\"\n                android:text=\"共0位会员\"\n                android:layout_centerVertical=\"true\"\n                android:layout_toRightOf=\"@+id/check_allsel_copy\"\n                android:layout_toEndOf=\"@+id/check_allsel_copy\"\n                android:layout_marginLeft=\"15dp\"\n                android:layout_marginStart=\"15dp\" /\u003e\n\n            \u003cTextView\n                android:id=\"@+id/txt_btn_adduser_copy\"\n                style=\"@style/font14\"\n                android:textColor=\"@color/home_rad_txt_blue\"\n                android:background=\"@drawable/corner_search_border_gray\"\n                android:text=\"新增会员\"\n                android:padding=\"5dp\"\n                android:layout_centerVertical=\"true\"\n                android:layout_alignParentRight=\"true\"\n                android:layout_alignParentEnd=\"true\" /\u003e\n        \u003c/RelativeLayout\u003e\n    \u003c/FrameLayout\u003e\n\u003c/LinearLayout\u003e\n\n\n```\n\n主要就是Frame布局 选择性的显示 那个copy的view，浮动的原理就是这样子的。","lang":"cn"},"__N_SSG":true},"page":"/[lang]/blog/[slug]","query":{"lang":"cn","slug":"android 顶部悬停效果 浮动布局"},"buildId":"GHV3Hdifg6RQFG6pfrsvS","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>